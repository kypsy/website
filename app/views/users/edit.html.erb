<div class="page-header">
  <h1>Settings</h1>
</div>

<% unless @user.twitter? && @user.facebook? %>
  <div class="buttons">
    <% if @user.twitter? %>
      <%= button_to_sign_in_with(:facebook) %>
    <% elsif @user.facebook? %>
      <%= button_to_sign_in_with(:twitter) %>
    <% end %>
  </div>

  <p class="note">
    Connecting both your Twitter and Facebook accounts makes it easier to fill out your <%= t(:brand) %> profile, which helps you find people.
    And if Twitter or Facebook ever has downtime, you can use the other to sign in to <%= t(:brand) %>.
  </p>
<% end %>

<%= render "errors" %>

<%= form_for @user, url: update_settings_path, html: { class: "form" } do |f| %>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <%= f.label      :name %>
        <%= f.text_field :name, autocapitalize: "words", class: "form-control" %>
      </div>

      <% if @user.username.blank? %>
        <div class="form-group">
          <%= f.label      :username %>
          <%= f.text_field :username, autocapitalize: "off", autocorrect: "off", class: "form-control" %>
        </div>
      <% end %>

      <div class="form-group">
        <%= f.label       :email %>
        <%= f.email_field :email, autocapitalize: "off", autocorrect: "off", class: "form-control", required: true %>
      </div>

      <div class="form-group">
        <%= f.label     :website %>
        <%= f.url_field :website, autocapitalize: "off", autocorrect: "off", class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label      :location %>
        <%= f.text_field :location, autocapitalize: "words", class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label     :bio %>
        <%= f.text_area :bio, autocapitalize: "sentences", class: "form-control", rows: 8 %>
      </div>

      <div class="form-group" id="notifications">
        <h2>Notifications</h2>

        <div class="checkbox">
          <label>
            <%= f.check_box :email_crushes %>
            <%= f.label     :email_crushes, "Notify me when someone crushes me" %>
          </label>
        </div>

        <div class="checkbox">
          <label>
            <%= f.check_box :email_messages %>
            <%= f.label     :email_messages, "Notify me when someone messages me" %>
          </label>
        </div>
      </div>
    </div>


    <div class="col-md-6">
      <div class="form-group">
        <%= f.label :my_interests_attributes, "My Interests" %><br>
        <%= render "/labels/form", f: f, collection: Interest.all %>
      </div>

      <div class="form-group">
        <%= f.label :your_activities_attributes, "Looking for partners for" %><br>
        <%= render "/labels/form", f: f, collection: Activity.all %>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :age_range, "My Age Range" %><br>

            <% AgeRange.all.each do |age_range| %>
              <div class="form-check">
                <label class="form-check-label">
                  <%= f.radio_button :age_range_id, age_range.id, { class: "form-check-input" } %>
                  <%= age_range.name %>
                </label>
              </div>
            <% end %>

          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :desired_age_ranges_attributes, "Desired Age Range" %>
            <%= render "/labels/form", f: f, collection: AgeRange.all %>
          </div>
        </div>
      </div>


      <!--
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <%= f.label  :label_id, "My Labels" %>
            <%= f.select :label_id, Label.options_for_select, { include_blank: true }, { class: "form-control" } %>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <%= f.label :your_labels_attributes, "Desired Labels" %>
            <%= render "/labels/form", f: f, collection: Label.all %>
          </div>
        </div>
      </div>
      -->

      <div class="row" id="social-media">
        <div class="col-sm-12">
          <div class="page-header">
            <h2>Social media profiles</h2>
          </div>
        </div>

        <% social_sites.map{|k,v| k}.each do |site| %>
          <div class="col-sm-6">
            <div class="form-group">
              <%# TODO wire this up to user settings instead of one column/method per site %>
              <%= f.label      "#{site.downcase.gsub(/ /, "")}_username".to_sym, "#{site} Username" %>
              <%= f.text_field "#{site.downcase.gsub(/ /, "")}_username".to_sym, class: "form-control", placeholder: "#{site} Username" %>
            </div>
          </div>
        <% end %>
      </div>

    </div>
  </div>

  <div class="actions">
    <%= f.submit "Save Changes", data: { disable_with: "Saving…" }, class: "btn btn-success btn-block btn-lg" %>
  </div>
<% end %>



<div id="danger-zone">
  <h5 class="danger-zone-title">DANGER ZONE</h5>

  <div class="danger-zone-body">
    <p>
      If you want to leave this place, that’s your decision.
      We’ll be sad to see you go, but we can respect that.
    </p>

    <p>
      All of your user profile and related data will be immediately deleted.
      No Twitter or Facebook information will be further stored.
    </p>

    <p>
      <b>There is no undo. No regrets.</b>
    </p>

    <%= button_to "I Want to Delete My Profile",
                  user_path(@user),
                  method:  :delete,
                  data:    { confirm: "Uhhhh… Are you sure you want to delete your profile?".html_safe },
                  class:   "btn btn-danger btn-block btn-lg" %>
  </div>
</div> <!-- #danger-zone -->
